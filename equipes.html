<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âquipes - LBMA</title>
    <link rel="icon" type="image/jpeg" href="logo-lbma.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;600;700&family=Work+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--primary:#1E3A5F;--accent:#CC0000;--gold:#D4AF37;--white:#FDFBF7;--cream:#F5F1E8;--dark:#1A1A1A}
        body{font-family:'Work Sans',sans-serif;background:var(--cream);color:var(--dark)}
        
        /* Navigation */
        nav{position:fixed;top:0;left:0;right:0;z-index:1000;background:var(--white);box-shadow:0 2px 20px rgba(0,0,0,.1)}
        nav .nav-container{max-width:1400px;margin:0 auto;padding:.75rem 2rem;display:flex;justify-content:space-between;align-items:center}
        .logo{display:flex;align-items:center;gap:.75rem;text-decoration:none}
        .logo img{height:55px}
        nav ul{display:flex;list-style:none;gap:.5rem}
        nav li{position:relative}
        nav a{text-decoration:none;color:var(--dark);font-weight:600;text-transform:uppercase;font-size:.85rem;padding:.5rem 1rem;display:block;transition:.3s}
        nav a:hover{color:var(--primary);background:var(--cream)}
        .dropdown-content{display:none;position:absolute;top:100%;left:0;background:var(--white);min-width:220px;box-shadow:0 8px 16px rgba(0,0,0,.1);border:2px solid var(--dark);z-index:1001}
        .dropdown-content a{padding:.75rem 1rem;border-bottom:1px solid var(--cream);font-size:.8rem}
        .dropdown:hover .dropdown-content{display:block}
        .dropdown>a::after{content:' ‚ñº';font-size:.6rem}
        
        /* Header */
        .page-header{margin-top:80px;background:linear-gradient(135deg,var(--primary) 0%,#2D5A8A 100%);color:var(--white);padding:3rem 2rem;text-align:center}
        .page-header h1{font-family:'Bebas Neue',sans-serif;font-size:clamp(2rem,6vw,3.5rem);letter-spacing:.1em}
        .page-header p{font-family:'Oswald',sans-serif;font-size:1.2rem;opacity:.9;margin-top:.5rem}
        
        .container{max-width:1400px;margin:0 auto;padding:2rem}
        
        /* Season Selector */
        .season-selector{background:var(--white);border:3px solid var(--dark);padding:1.5rem;margin-bottom:2rem;display:flex;align-items:center;justify-content:center;gap:1rem;flex-wrap:wrap}
        .season-selector label{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;color:var(--primary)}
        .season-selector select{padding:.75rem 2rem;font-family:'Oswald',sans-serif;font-size:1.2rem;border:3px solid var(--dark);background:var(--cream);cursor:pointer}
        .season-selector select:hover{background:var(--gold)}
        .archive-badge{background:var(--gold);color:var(--dark);padding:.5rem 1rem;font-family:'Oswald',sans-serif;font-size:.9rem;display:none}
        .archive-badge.visible{display:inline-block}
        
        /* Message rep√™chage */
        .draft-message{background:linear-gradient(135deg,var(--accent) 0%,#8B0000 100%);color:white;padding:2rem;text-align:center;margin-bottom:2rem;border:3px solid var(--dark);display:none}
        .draft-message.visible{display:block}
        .draft-message h3{font-family:'Bebas Neue',sans-serif;font-size:1.8rem;margin-bottom:.5rem}
        .draft-message p{font-family:'Oswald',sans-serif}
        .draft-message a{color:var(--gold);text-decoration:none;font-weight:bold}
        
        /* L√©gende */
        .legend{background:var(--white);border:3px solid var(--dark);padding:1.5rem;margin-bottom:2rem}
        .legend h3{font-family:'Bebas Neue',sans-serif;color:var(--primary);margin-bottom:1rem}
        .legend-items{display:flex;flex-wrap:wrap;gap:1rem}
        .legend-item{display:flex;align-items:center;gap:.5rem}
        .cote-badge{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:.9rem}
        .cote-1{background:#4CAF50}.cote-2{background:#8BC34A}.cote-3{background:#FFC107;color:#333}.cote-4{background:#FF9800}.cote-5{background:#f44336}
        
        /* Teams Grid */
        .teams-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem}
        .team-card{background:var(--white);border:3px solid var(--dark);overflow:hidden}
        .team-header{padding:1.5rem;text-align:center;color:white}
        .team-header.aigles{background:linear-gradient(135deg,#FF8C00,#FF6B00)}
        .team-header.condors{background:linear-gradient(135deg,#124FB2,#1A6FD4)}
        .team-header.ducs{background:linear-gradient(135deg,#006400,#228B22)}
        .team-header.faucons{background:linear-gradient(135deg,#CC0000,#FF0000)}
        .team-header.harfangs{background:linear-gradient(135deg,#929292,#A8A8A8)}
        .team-header.vautours{background:linear-gradient(135deg,#FFFF00,#FFFF66);color:#333}
        .team-header h2{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:.1em}
        .team-header .coach{font-family:'Oswald',sans-serif;opacity:.9;margin-top:.5rem}
        .team-header .team-total{font-family:'Oswald',sans-serif;font-size:.9rem;opacity:.8;margin-top:.25rem}
        .player-list{padding:1rem}
        .player-row{display:flex;justify-content:space-between;align-items:center;padding:.5rem;border-bottom:1px solid var(--cream)}
        .player-row:last-child{border-bottom:none}
        .player-row:hover{background:var(--cream)}
        .player-name{font-weight:500}
        .player-cote{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:.8rem}
        .empty-team{text-align:center;padding:2rem;color:#999;font-style:italic}
        
        /* Footer */
        footer{background:var(--dark);color:var(--white);padding:2rem;margin-top:3rem}
        .footer-content{max-width:1200px;margin:0 auto;text-align:center}
        .footer-links{display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;margin-bottom:1rem}
        .footer-links a{color:var(--gold);text-decoration:none}
        .footer-bottom{opacity:.7;font-size:.85rem}
        
        @media(max-width:768px){
            nav ul{display:none}
            .teams-grid{grid-template-columns:1fr}
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo"><img src="logo-lbma.jpg" alt="LBMA"></a>
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li class="dropdown">
                    <a href="#">Statistiques</a>
                    <div class="dropdown-content">
                        <a href="archives-frappeurs.html">üìä Stats Frappeurs par Ann√©e</a>
                        <a href="frappeurs-carriere.html">‚≠ê Frappeurs - Carri√®re</a>
                        <a href="frappeurs-records.html">üèÜ Frappeurs - Records</a>
                        <a href="archives-lanceurs.html">üìä Stats Lanceurs par Ann√©e</a>
                        <a href="lanceurs-carriere.html">‚≠ê Lanceurs - Carri√®re</a>
                        <a href="lanceurs-records.html">üèÜ Lanceurs - Records</a>
                    </div>
                </li>
                <li><a href="joueurs.html">Joueurs</a></li>
                <li><a href="equipes.html" style="color:var(--primary);font-weight:700">√âquipes</a></li>
                <li><a href="calendrier.html">Calendrier</a></li>
                <li><a href="classement-equipes.html">Classements</a></li>
                <li><a href="admin.html" style="color:var(--accent)">Admin</a></li>
            </ul>
        </div>
    </nav>

    <div class="page-header">
        <h1>üë• √âQUIPES LBMA</h1>
        <p>Composition des 6 √©quipes - Saison <span id="headerSaison">2026</span></p>
    </div>

    <div class="container">
        <!-- S√©lecteur de saison -->
        <div class="season-selector">
            <label>üìÖ SAISON :</label>
            <select id="seasonSelect" onchange="changeSeason()">
                <option value="2026">2026 (En cours)</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
            </select>
            <span class="archive-badge" id="archiveBadge">üìö ARCHIVE</span>
        </div>
        
        <!-- Message rep√™chage en cours -->
        <div class="draft-message" id="draftMessage">
            <h3>üî¥ REP√äCHAGE 2026 EN COURS</h3>
            <p>Les √©quipes seront form√©es lors du rep√™chage. <a href="repechage-live.html">Voir le rep√™chage en direct ‚Üí</a></p>
        </div>
        
        <div class="legend">
            <h3>üìñ L√©gende des Cotes</h3>
            <div class="legend-items">
                <div class="legend-item"><span class="cote-badge cote-1">1</span> D√©butant</div>
                <div class="legend-item"><span class="cote-badge cote-2">2</span> Interm√©diaire</div>
                <div class="legend-item"><span class="cote-badge cote-3">3</span> R√©gulier</div>
                <div class="legend-item"><span class="cote-badge cote-4">4</span> Avanc√©</div>
                <div class="legend-item"><span class="cote-badge cote-5">5</span> √âlite</div>
            </div>
        </div>

        <div class="teams-grid" id="teams-container"></div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="index.html">Accueil</a>
                <a href="joueurs.html">Joueurs</a>
                <a href="archives-frappeurs.html">Stats Frappeurs</a>
                <a href="archives-lanceurs.html">Stats Lanceurs</a>
                <a href="temple-renommee.html">Temple de la Renomm√©e</a>
            </div>
            <div class="footer-bottom">¬© 2026 Ligue de Balle Molle Amicale (LBMA) - Tous droits r√©serv√©s</div>
        </div>
    </footer>

    <script>
        let equipesData = null;
        let currentSeason = '2026';
        const CURRENT_SEASON = '2026';
        
        // Saisons disponibles
        const availableSeasons = ['2026', '2025', '2024', '2023', '2022', '2021', '2020'];

        async function init() {
            // V√©rifier si une saison est dans l'URL
            const urlParams = new URLSearchParams(window.location.search);
            const seasonParam = urlParams.get('saison');
            if (seasonParam && availableSeasons.includes(seasonParam)) {
                currentSeason = seasonParam;
                document.getElementById('seasonSelect').value = currentSeason;
            }
            
            await loadSeason(currentSeason);
        }

        async function loadSeason(season) {
            currentSeason = season;
            
            try {
                const response = await fetch(`equipes-${season}.json`);
                equipesData = await response.json();
                
                // Mettre √† jour l'interface
                document.getElementById('headerSaison').textContent = season;
                document.getElementById('archiveBadge').classList.toggle('visible', season !== CURRENT_SEASON);
                
                // V√©rifier si les √©quipes sont vides (rep√™chage en cours)
                const totalJoueurs = equipesData.equipes.reduce((sum, e) => sum + e.joueurs.length, 0);
                const isDraftInProgress = season === CURRENT_SEASON && totalJoueurs === 0;
                document.getElementById('draftMessage').classList.toggle('visible', isDraftInProgress);
                
                renderTeams();
            } catch (error) {
                console.error(`Erreur chargement equipes-${season}.json:`, error);
                document.getElementById('teams-container').innerHTML = '<p style="text-align:center;padding:2rem;color:#999">Donn√©es non disponibles pour cette saison</p>';
            }
        }

        function changeSeason() {
            const season = document.getElementById('seasonSelect').value;
            loadSeason(season);
            
            // Mettre √† jour l'URL sans recharger la page
            const url = new URL(window.location);
            if (season === CURRENT_SEASON) {
                url.searchParams.delete('saison');
            } else {
                url.searchParams.set('saison', season);
            }
            window.history.pushState({}, '', url);
        }

        function renderTeams() {
            const container = document.getElementById('teams-container');
            let html = '';
            
            equipesData.equipes.forEach(equipe => {
                const teamClass = equipe.id.toLowerCase();
                const coach = equipe.joueurs.find(j => j.isCoach);
                const joueurs = equipe.joueurs.filter(j => !j.isCoach);
                const totalCote = equipe.joueurs.reduce((sum, j) => sum + j.cote, 0);
                
                html += `
                    <div class="team-card">
                        <div class="team-header ${teamClass}">
                            <h2>ü¶Ö ${equipe.nom.toUpperCase()}</h2>
                            ${coach ? `<div class="coach">üëî ${coach.nom} <span class="player-cote cote-${coach.cote}" style="display:inline-flex;margin-left:.5rem">${coach.cote}</span></div>` : '<div class="coach">üëî Coach √† d√©terminer</div>'}
                            <div class="team-total">Total: ${totalCote} pts ‚Ä¢ ${equipe.joueurs.length} joueurs</div>
                        </div>
                        <div class="player-list">
                            ${joueurs.length > 0 ? joueurs.map(j => `
                                <div class="player-row">
                                    <span class="player-name">${j.nom}</span>
                                    <span class="player-cote cote-${j.cote}">${j.cote}</span>
                                </div>
                            `).join('') : '<div class="empty-team">√âquipe en formation...</div>'}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        init();
    </script>
</body>
</html>
