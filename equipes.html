<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã‰quipes - LBMA</title>
    <link rel="icon" type="image/jpeg" href="logo-lbma.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;600;700&family=Work+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--primary:#1E3A5F;--accent:#CC0000;--gold:#D4AF37;--white:#FDFBF7;--cream:#F5F1E8;--dark:#1A1A1A}
        body{font-family:'Work Sans',sans-serif;background:var(--cream);color:var(--dark)}
        .page-header{margin-top:80px;background:linear-gradient(135deg,var(--primary) 0%,#2D5A8A 100%);color:var(--white);padding:3rem 2rem;text-align:center}
        .page-header h1{font-family:'Bebas Neue',sans-serif;font-size:clamp(2rem,6vw,3.5rem);letter-spacing:.1em}
        .page-header p{font-family:'Oswald',sans-serif;font-size:1.2rem;opacity:.9;margin-top:.5rem}
        .container{max-width:1400px;margin:0 auto;padding:2rem}
        .season-selector{background:var(--white);border:3px solid var(--dark);padding:1.5rem;margin-bottom:2rem;display:flex;align-items:center;justify-content:center;gap:1rem;flex-wrap:wrap}
        .season-selector label{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;color:var(--primary)}
        .season-selector select{padding:.75rem 2rem;font-family:'Oswald',sans-serif;font-size:1.2rem;border:3px solid var(--dark);background:var(--cream);cursor:pointer}
        .season-selector select:hover{background:var(--gold)}
        .archive-badge{background:var(--gold);color:var(--dark);padding:.5rem 1rem;font-family:'Oswald',sans-serif;font-size:.9rem;display:none}
        .archive-badge.visible{display:inline-block}
        .draft-message{background:linear-gradient(135deg,var(--accent) 0%,#8B0000 100%);color:white;padding:2rem;text-align:center;margin-bottom:2rem;border:3px solid var(--dark);display:none}
        .draft-message.visible{display:block}
        .draft-message h3{font-family:'Bebas Neue',sans-serif;font-size:1.8rem;margin-bottom:.5rem}
        .draft-message p{font-family:'Oswald',sans-serif}
        .draft-message a{color:var(--gold);text-decoration:none;font-weight:bold}
        .legend{background:var(--white);border:3px solid var(--dark);padding:1.5rem;margin-bottom:2rem}
        .legend h3{font-family:'Bebas Neue',sans-serif;color:var(--primary);margin-bottom:1rem}
        .legend-items{display:flex;flex-wrap:wrap;gap:1rem}
        .legend-item{display:flex;align-items:center;gap:.5rem}
        .cote-badge{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:.9rem}
        .cote-1{background:#4CAF50}.cote-2{background:#8BC34A}.cote-3{background:#FFC107;color:#333}.cote-4{background:#FF9800}.cote-5{background:#f44336}
        .teams-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem}
        .team-card{background:var(--white);border:3px solid var(--dark);overflow:hidden}
        .team-header{padding:1.5rem;text-align:center;color:white}
        .team-header.aigles{background:linear-gradient(135deg,#FF8C00,#FF6B00)}
        .team-header.condors{background:linear-gradient(135deg,#124FB2,#1A6FD4)}
        .team-header.ducs{background:linear-gradient(135deg,#006400,#228B22)}
        .team-header.faucons{background:linear-gradient(135deg,#CC0000,#FF0000)}
        .team-header.harfangs{background:linear-gradient(135deg,#929292,#A8A8A8)}
        .team-header.vautours{background:linear-gradient(135deg,#FFFF00,#FFFF66);color:#333}
        .team-header h2{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:.1em}
        .team-header .coach{font-family:'Oswald',sans-serif;opacity:.9;margin-top:.5rem}
        .team-header .team-total{font-family:'Oswald',sans-serif;font-size:.9rem;opacity:.8;margin-top:.25rem}
        .player-list{padding:1rem}
        .player-row{display:flex;justify-content:space-between;align-items:center;padding:.5rem;border-bottom:1px solid var(--cream)}
        .player-row:last-child{border-bottom:none}
        .player-row:hover{background:var(--cream)}
        .player-name{font-weight:500}
        .player-cote{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:.8rem}
        .empty-team{text-align:center;padding:2rem;color:#999;font-style:italic}
        .loading-msg{text-align:center;padding:3rem;font-family:'Oswald',sans-serif;color:var(--primary);font-size:1.2rem}
        @media(max-width:768px){.teams-grid{grid-template-columns:1fr}}


            /* === NAV STANDARD LBMA === */
        nav{position:fixed;top:0;left:0;right:0;z-index:1000;background:var(--white);box-shadow:0 2px 20px rgba(0,0,0,.1)}
        nav .nav-container{max-width:1400px;margin:0 auto;padding:.75rem 2rem;display:flex;justify-content:space-between;align-items:center}
        .logo{display:flex;align-items:center;gap:.75rem;text-decoration:none}
        .logo img{height:55px}
        nav ul{display:flex;list-style:none;gap:.5rem}
        nav li{position:relative}
        nav a{text-decoration:none;color:var(--dark);font-weight:600;text-transform:uppercase;font-size:.85rem;padding:.5rem 1rem;display:block;transition:.3s}
        nav a:hover{color:var(--primary);background:var(--cream)}
        .dropdown-content{display:none;position:absolute;top:100%;left:0;background:var(--white);min-width:220px;box-shadow:0 8px 16px rgba(0,0,0,.1);border:2px solid var(--dark);z-index:1001}
        .dropdown-content a{padding:.75rem 1rem;border-bottom:1px solid var(--cream);font-size:.8rem}
        .dropdown:hover .dropdown-content{display:block}
        .dropdown>a::after{content:' \25BC';font-size:.6rem}
        .hamburger{display:none;font-size:2rem;cursor:pointer;padding:.5rem;color:var(--dark)}
        /* === FOOTER STANDARD LBMA === */
        footer{background:var(--dark);color:var(--white);padding:3rem 2rem}
        .footer-social{display:flex;gap:.5rem;flex-wrap:wrap}
        .social-link{display:inline-flex;align-items:center;gap:.5rem;background:rgba(255,255,255,.1);padding:.6rem 1.2rem;border-radius:5px;color:white;text-decoration:none;transition:.3s}
        .social-link:hover{background:var(--gold);color:var(--dark)}
        .footer-bottom{max-width:1400px;margin:1.5rem auto 0;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.2);text-align:center;opacity:.7;font-size:.85rem}
        .dropdown.open .dropdown-content{display:block!important}
        @media(max-width:768px){
            .hamburger{display:block}
            nav ul{display:none;position:absolute;top:100%;left:0;right:0;background:var(--white);flex-direction:column;padding:1rem;box-shadow:0 8px 16px rgba(0,0,0,.1)}
            nav ul.open{display:flex}
            .dropdown-content{position:static;box-shadow:none;border:none;border-left:3px solid var(--primary);margin-left:1rem}
            .dropdown:hover .dropdown-content{display:none}
            .dropdown.open .dropdown-content{display:block}
        }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo"><img src="logo-lbma.jpg" alt="LBMA"></a>
            <div class="hamburger" onclick="document.querySelector('nav ul').classList.toggle('open')">&#9776;</div>
            <ul>
                <li><a href="index.html">Accueil</a></li>
                <li><a href="equipes.html" style="color:var(--primary);font-weight:700">Ã‰quipes</a></li>
                <li><a href="joueurs.html">Joueurs</a></li>
                <li><a href="calendrier.html">Calendrier</a></li>
                <li class="dropdown">
                    <a href="#">Statistiques</a>
                    <div class="dropdown-content">
                        <a href="classement-equipes.html">ğŸ† Classement</a>
                        <a href="stats-frappeurs.html">âš¾ Frappeurs</a>
                        <a href="stats-lanceurs.html">ğŸ¯ Lanceurs</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">Archives</a>
                    <div class="dropdown-content">
                        <a href="archives-frappeurs.html">ğŸ“Š Stats Frappeurs par AnnÃ©e</a>
                        <a href="frappeurs-carriere.html">â­ Frappeurs - CarriÃ¨re</a>
                        <a href="frappeurs-records.html">ğŸ† Frappeurs - Records</a>
                        <a href="archives-lanceurs.html">ğŸ“Š Stats Lanceurs par AnnÃ©e</a>
                        <a href="lanceurs-carriere.html">â­ Lanceurs - CarriÃ¨re</a>
                        <a href="lanceurs-records.html">ğŸ† Lanceurs - Records</a>
                        <a href="classement-equipes.html">ğŸ“ˆ Classements Historiques</a>
                        <a href="temple-renommee.html">ğŸ›ï¸ Temple de la RenommÃ©e</a>
                        <a href="archives.html">ğŸ“š Archives ComplÃ¨tes</a>
                    </div>
                </li>
                <li><a href="contact.html">Direction</a></li>
                <li><a href="admin.html" style="color:var(--accent)">Admin</a></li>
            </ul>
        </div>
    </nav>

    <div class="page-header">
        <h1>ğŸ‘¥ Ã‰QUIPES LBMA</h1>
        <p>Composition des 6 Ã©quipes - Saison <span id="headerSaison">2026</span></p>
    </div>

    <div class="container">
        <div class="season-selector">
            <label>ğŸ“… SAISON :</label>
            <select id="seasonSelect" onchange="changeSeason()"></select>
            <span class="archive-badge" id="archiveBadge">ğŸ“š ARCHIVE</span>
        </div>
        
        <div class="draft-message" id="draftMessage">
            <h3>ğŸ”´ REPÃŠCHAGE <span id="draftYear">2026</span> EN COURS</h3>
            <p>Les Ã©quipes seront formÃ©es lors du repÃªchage. <a href="repechage-live.html">Voir le repÃªchage en direct â†’</a></p>
        </div>
        
        <div class="legend">
            <h3>ğŸ“– LÃ©gende des Cotes</h3>
            <div class="legend-items">
                <div class="legend-item"><span class="cote-badge cote-1">1</span> DÃ©butant</div>
                <div class="legend-item"><span class="cote-badge cote-2">2</span> IntermÃ©diaire</div>
                <div class="legend-item"><span class="cote-badge cote-3">3</span> RÃ©gulier</div>
                <div class="legend-item"><span class="cote-badge cote-4">4</span> AvancÃ©</div>
                <div class="legend-item"><span class="cote-badge cote-5">5</span> Ã‰lite</div>
            </div>
        </div>

        <div class="teams-grid" id="teams-container">
            <div class="loading-msg">Chargement des Ã©quipes...</div>
        </div>
    </div>

    <footer>
        <div class="footer-grid" style="max-width:1400px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem">
            <div>
                <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem">
                    <img src="logo-lbma.jpg" alt="LBMA" style="height:50px;background:white;padding:5px;border-radius:5px">
                    <div>
                        <div style="font-family:'Bebas Neue',sans-serif;font-size:1.5rem">LBMA</div>
                        <div style="opacity:.7;font-size:.9rem">Depuis 1976</div>
                    </div>
                </div>
                <div class="footer-social" style="margin-top:1rem">
                    <a href="https://www.facebook.com/groups/292aborgnmom" target="_blank" class="social-link">ğŸ“˜ Facebook</a>
                    <a href="https://www.marqueur.com/league/lbma" target="_blank" class="social-link">ğŸ“Š Marqueur.com</a>
                </div>
            </div>
            <div>
                <h4 style="font-family:'Oswald',sans-serif;color:var(--gold);margin-bottom:1rem">ğŸ“Š Statistiques 2026</h4>
                <ul style="list-style:none">
                    <li><a href="classement-equipes.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Classement</a></li>
                    <li><a href="stats-frappeurs.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Frappeurs</a></li>
                    <li><a href="stats-lanceurs.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Lanceurs</a></li>
                </ul>
            </div>
            <div>
                <h4 style="font-family:'Oswald',sans-serif;color:var(--gold);margin-bottom:1rem">ğŸ“š Archives</h4>
                <ul style="list-style:none">
                    <li><a href="archives-frappeurs.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Stats Frappeurs par AnnÃ©e</a></li>
                    <li><a href="frappeurs-carriere.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Frappeurs - CarriÃ¨re</a></li>
                    <li><a href="archives-lanceurs.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Stats Lanceurs par AnnÃ©e</a></li>
                    <li><a href="lanceurs-carriere.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Lanceurs - CarriÃ¨re</a></li>
                    <li><a href="classement-equipes.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Classements Historiques</a></li>
                    <li><a href="temple-renommee.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Temple de la RenommÃ©e</a></li>
                </ul>
            </div>
            <div>
                <h4 style="font-family:'Oswald',sans-serif;color:var(--gold);margin-bottom:1rem">âš¾ La Ligue</h4>
                <ul style="list-style:none">
                    <li><a href="equipes.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Ã‰quipes 2026</a></li>
                    <li><a href="calendrier.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Calendrier</a></li>
                    <li><a href="reglements.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">RÃ¨glements</a></li>
                    <li><a href="contact.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Direction</a></li>
                    <li><a href="liens-utiles.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Liens Utiles</a></li>
                    <li><a href="revue-presse.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">MÃ©dias & Entrevues</a></li>
                    <li><a href="tutoriel.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Tutoriel</a></li>
                    <li><a href="nous-contacter.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Nous Contacter</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">Â© 2026 Ligue de Balle Molle Amicale (LBMA) - Tous droits rÃ©servÃ©s</div>
    </footer>

    <script>
        // ========== SUPABASE CONFIG ==========
        const SB_URL = 'https://xgyskiatppgaeaamjhxr.supabase.co';
        const SB_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhneXNraWF0cHBnYWVhYW1qaHhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0OTgxNTQsImV4cCI6MjA4NjA3NDE1NH0.67KCcUWlJij-scDoCUvZpkiCle5-mHVmy-inRk96Tac';
        
        // Saisons avec donnÃ©es JSON (archives)
        const JSON_SEASONS = ['2020','2021','2022','2023','2024','2025'];
        // Saison Supabase minimum
        const SUPABASE_MIN = '2025';
        
        const TEAM_NAMES = ['AIGLES','CONDORS','DUCS','FAUCONS','HARFANGS','VAUTOURS'];
        const TEAM_EMOJIS = {AIGLES:'ğŸ¦…',CONDORS:'ğŸ¦…',DUCS:'ğŸ¦‰',FAUCONS:'ğŸ¦…',HARFANGS:'ğŸ¦‰',VAUTOURS:'ğŸ¦…'};
        const TEAM_DISPLAY = {AIGLES:'Aigles',CONDORS:'Condors',DUCS:'Ducs',FAUCONS:'Faucons',HARFANGS:'Harfangs',VAUTOURS:'Vautours'};
        
        let currentSeason = '';

        // ========== INIT ==========
        async function init() {
            // Build season dropdown from Supabase + JSON archives
            await buildSeasonDropdown();
            
            // Check URL param
            const urlParams = new URLSearchParams(window.location.search);
            const sp = urlParams.get('saison');
            const sel = document.getElementById('seasonSelect');
            if (sp && sel.querySelector('option[value="'+sp+'"]')) {
                currentSeason = sp;
                sel.value = sp;
            } else {
                currentSeason = sel.value;
            }
            
            await loadSeason(currentSeason);
        }

        async function buildSeasonDropdown() {
            const sel = document.getElementById('seasonSelect');
            let supabaseSaisons = [];
            
            // Get saisons from Supabase equipes_saison
            try {
                const res = await fetch(SB_URL + '/rest/v1/equipes_saison?select=saison&order=saison.desc', {
                    headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Range': '0-999' }
                });
                if (res.ok) {
                    const rows = await res.json();
                    supabaseSaisons = [...new Set(rows.map(r => r.saison))];
                }
            } catch(e) { console.warn('Supabase equipes_saison error:', e); }
            
            // Also check repechage_picks for seasons with draft in progress
            try {
                const res = await fetch(SB_URL + '/rest/v1/repechage_picks?select=saison&order=saison.desc', {
                    headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Range': '0-999' }
                });
                if (res.ok) {
                    const rows = await res.json();
                    const pickSaisons = [...new Set(rows.map(r => r.saison))];
                    pickSaisons.forEach(s => { if (!supabaseSaisons.includes(s)) supabaseSaisons.push(s); });
                }
            } catch(e) {}
            
            // Also check joueurs_liste for seasons where draft hasn't started
            try {
                const res = await fetch(SB_URL + '/rest/v1/joueurs_liste?select=saison&order=saison.desc', {
                    headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Range': '0-999' }
                });
                if (res.ok) {
                    const rows = await res.json();
                    const jSaisons = [...new Set(rows.map(r => r.saison))];
                    jSaisons.forEach(s => { if (!supabaseSaisons.includes(s)) supabaseSaisons.push(s); });
                }
            } catch(e) {}
            
            // Merge all seasons
            const allSaisons = [...new Set([...supabaseSaisons, ...JSON_SEASONS])].sort((a,b) => b.localeCompare(a));
            
            sel.innerHTML = allSaisons.map((s, i) => {
                const label = i === 0 ? s + ' (En cours)' : s;
                return '<option value="' + s + '">' + label + '</option>';
            }).join('');
        }

        async function loadSeason(season) {
            currentSeason = season;
            document.getElementById('headerSaison').textContent = season;
            document.getElementById('teams-container').innerHTML = '<div class="loading-msg">Chargement...</div>';
            
            const sel = document.getElementById('seasonSelect');
            const isLatest = sel.options[0] && sel.options[0].value === season;
            document.getElementById('archiveBadge').classList.toggle('visible', !isLatest);
            
            // Try Supabase first
            let equipesData = await loadFromSupabase(season);
            
            // Fallback to JSON
            if (!equipesData) {
                equipesData = await loadFromJSON(season);
            }
            
            if (equipesData) {
                const totalJoueurs = equipesData.equipes.reduce((sum, e) => sum + e.joueurs.length, 0);
                const isDraftInProgress = isLatest && totalJoueurs === 0;
                document.getElementById('draftMessage').classList.toggle('visible', isDraftInProgress);
                document.getElementById('draftYear').textContent = season;
                renderTeams(equipesData);
            } else {
                // No data at all â€” check if draft exists
                const hasDraft = await checkDraftExists(season);
                if (hasDraft) {
                    document.getElementById('draftMessage').classList.add('visible');
                    document.getElementById('draftYear').textContent = season;
                    document.getElementById('teams-container').innerHTML = '';
                    renderEmptyTeams();
                } else {
                    document.getElementById('draftMessage').classList.remove('visible');
                    document.getElementById('teams-container').innerHTML = '<p style="text-align:center;padding:2rem;color:#999">DonnÃ©es non disponibles pour cette saison</p>';
                }
            }
        }

        async function loadFromSupabase(season) {
            try {
                const res = await fetch(SB_URL + '/rest/v1/equipes_saison?saison=eq.' + season + '&order=equipe.asc,ordre.asc', {
                    headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Range': '0-999' }
                });
                if (!res.ok) return null;
                const rows = await res.json();
                if (rows.length === 0) return null;
                
                // Convert to display format
                const equipes = TEAM_NAMES.map(team => {
                    const teamRows = rows.filter(r => r.equipe === team);
                    return {
                        id: team,
                        nom: TEAM_DISPLAY[team],
                        joueurs: teamRows.map(r => ({
                            nom: r.joueur_nom,
                            cote: r.joueur_cote,
                            isCoach: r.is_coach || false
                        }))
                    };
                });
                
                return { saison: season, equipes: equipes };
            } catch(e) {
                console.warn('Supabase equipes error:', e);
                return null;
            }
        }

        async function loadFromJSON(season) {
            try {
                const response = await fetch('equipes-' + season + '.json');
                if (!response.ok) return null;
                return await response.json();
            } catch(e) {
                return null;
            }
        }

        async function checkDraftExists(season) {
            try {
                const res = await fetch(SB_URL + '/rest/v1/joueurs_liste?saison=eq.' + season + '&select=id&limit=1', {
                    headers: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY }
                });
                if (res.ok) {
                    const rows = await res.json();
                    return rows.length > 0;
                }
            } catch(e) {}
            return false;
        }

        function changeSeason() {
            const season = document.getElementById('seasonSelect').value;
            loadSeason(season);
            const url = new URL(window.location);
            const sel = document.getElementById('seasonSelect');
            const isLatest = sel.options[0] && sel.options[0].value === season;
            if (isLatest) { url.searchParams.delete('saison'); }
            else { url.searchParams.set('saison', season); }
            window.history.pushState({}, '', url);
        }

        function renderTeams(data) {
            const container = document.getElementById('teams-container');
            container.innerHTML = data.equipes.map(equipe => {
                const teamClass = equipe.id.toLowerCase();
                const emoji = TEAM_EMOJIS[equipe.id] || 'ğŸ¦…';
                const coach = equipe.joueurs.find(j => j.isCoach || j.is_coach);
                const joueurs = equipe.joueurs.filter(j => !j.isCoach && !j.is_coach);
                const totalCote = equipe.joueurs.reduce((sum, j) => sum + j.cote, 0);
                
                return '<div class="team-card">' +
                    '<div class="team-header ' + teamClass + '">' +
                        '<h2>' + emoji + ' ' + equipe.nom.toUpperCase() + '</h2>' +
                        (coach
                            ? '<div class="coach">ğŸ‘” ' + coach.nom + ' <span class="player-cote cote-' + coach.cote + '" style="display:inline-flex;margin-left:.5rem">' + coach.cote + '</span></div>'
                            : '<div class="coach">ğŸ‘” Coach Ã  dÃ©terminer</div>') +
                        '<div class="team-total">Total: ' + totalCote + ' pts â€¢ ' + equipe.joueurs.length + ' joueurs</div>' +
                    '</div>' +
                    '<div class="player-list">' +
                        (joueurs.length > 0
                            ? joueurs.map(j => '<div class="player-row"><span class="player-name">' + j.nom + '</span><span class="player-cote cote-' + j.cote + '">' + j.cote + '</span></div>').join('')
                            : '<div class="empty-team">Ã‰quipe en formation...</div>') +
                    '</div>' +
                '</div>';
            }).join('');
        }

        function renderEmptyTeams() {
            const container = document.getElementById('teams-container');
            container.innerHTML = TEAM_NAMES.map(team => {
                const teamClass = team.toLowerCase();
                const emoji = TEAM_EMOJIS[team] || 'ğŸ¦…';
                return '<div class="team-card">' +
                    '<div class="team-header ' + teamClass + '">' +
                        '<h2>' + emoji + ' ' + TEAM_DISPLAY[team].toUpperCase() + '</h2>' +
                        '<div class="coach">ğŸ‘” Coach Ã  dÃ©terminer</div>' +
                        '<div class="team-total">Total: 0 pts â€¢ 0 joueurs</div>' +
                    '</div>' +
                    '<div class="player-list"><div class="empty-team">Ã‰quipe en formation...</div></div>' +
                '</div>';
            }).join('');
        }

        init();
    </script>

    <script>
    /* === MOBILE NAV STANDARD LBMA === */
    (function() {
        var isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

        document.querySelectorAll('nav .dropdown > a').forEach(function(a) {
            a.addEventListener('click', function(e) {
                if (isTouch || window.innerWidth <= 768) {
                    e.preventDefault();
                    var parent = this.parentElement;
                    document.querySelectorAll('nav .dropdown').forEach(function(d) {
                        if (d !== parent) d.classList.remove('open');
                    });
                    parent.classList.toggle('open');
                }
            });
        });

        document.addEventListener('click', function(e) {
            if (!e.target.closest('nav')) {
                document.querySelector('nav ul')?.classList.remove('open');
                document.querySelectorAll('nav .dropdown').forEach(function(d) {
                    d.classList.remove('open');
                });
            }
        });
    })();
    </script>
</body>
</html>
