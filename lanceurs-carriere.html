<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lanceurs - CarriÃ¨re - LBMA</title>
    <link rel="icon" type="image/jpeg" href="logo-lbma.jpg">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;600;700&family=Work+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--primary:#1E3A5F;--accent:#CC0000;--gold:#D4AF37;--white:#FDFBF7;--cream:#F5F1E8;--dark:#1A1A1A}
        body{font-family:'Work Sans',sans-serif;background:var(--cream);color:var(--dark)}
        .page-header{margin-top:80px;background:linear-gradient(135deg,var(--accent) 0%,#8B0000 100%);color:var(--white);padding:3rem 2rem;text-align:center;position:relative}
        .page-header::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:300px;height:300px;background:url('logo-lbma.jpg') no-repeat center;background-size:contain;opacity:.1}
        .page-header h1{font-family:'Bebas Neue',sans-serif;font-size:clamp(2rem,6vw,3.5rem);letter-spacing:.1em;position:relative}
        .page-header p{font-family:'Oswald',sans-serif;font-size:1.2rem;position:relative;margin-top:.5rem}
        .container{max-width:1400px;margin:0 auto;padding:2rem}
        .controls{background:var(--white);border:3px solid var(--dark);padding:1.5rem;margin-bottom:2rem;display:flex;gap:1rem;flex-wrap:wrap;align-items:flex-end}
        .control-group{display:flex;flex-direction:column;gap:.5rem}
        .control-group label{font-family:'Oswald',sans-serif;text-transform:uppercase;font-size:.85rem;color:var(--accent)}
        .control-group select,.control-group input{padding:.75rem 1.5rem;border:2px solid var(--dark);font-size:1rem;background:var(--cream);min-width:200px}
        .control-group input{min-width:250px}
        .btn{padding:.75rem 1.5rem;font-family:'Oswald',sans-serif;border:2px solid var(--dark);cursor:pointer;transition:.3s;text-transform:uppercase;background:var(--accent);color:white}
        .btn:hover{opacity:.9}
        .btn-secondary{background:var(--cream);color:var(--dark)}
        .podium-container{display:flex;justify-content:center;align-items:flex-end;gap:1.5rem;margin:2rem 0;padding:1rem}
        .podium-card{text-align:center;border:3px solid var(--dark);padding:1.5rem;min-width:200px;transition:transform .3s}
        .podium-card:hover{transform:translateY(-5px)}
        .podium-1{background:linear-gradient(135deg,#FFD700,#FFA000);order:2;min-height:180px}
        .podium-2{background:linear-gradient(135deg,#C0C0C0,#A0A0A0);order:1;min-height:150px}
        .podium-3{background:linear-gradient(135deg,#CD7F32,#A0522D);color:var(--white);order:3;min-height:130px}
        .podium-rank{font-family:'Bebas Neue',sans-serif;font-size:2.5rem}
        .podium-name{font-family:'Oswald',sans-serif;font-size:1.1rem;font-weight:700;margin:.5rem 0}
        .podium-stat{font-family:'Bebas Neue',sans-serif;font-size:2rem}
        .podium-label{font-size:.8rem;opacity:.8}
        .cat-tabs{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1.5rem;justify-content:center}
        .cat-tab{padding:.6rem 1.2rem;border:2px solid var(--dark);background:var(--cream);font-family:'Oswald',sans-serif;font-size:.9rem;cursor:pointer;transition:.3s}
        .cat-tab:hover{background:var(--gold);color:var(--dark)}
        .cat-tab.active{background:var(--accent);color:white;border-color:var(--accent)}
        .table-wrap{overflow-x:auto;border:3px solid var(--dark);background:var(--white)}
        .stats-table{width:100%;border-collapse:collapse;font-size:.9rem}
        .stats-table th{background:var(--accent);color:white;padding:.75rem .5rem;text-align:center;font-family:'Oswald',sans-serif;text-transform:uppercase;font-size:.8rem;position:sticky;top:0;cursor:pointer;white-space:nowrap;user-select:none}
        .stats-table th:hover{background:#a00}
        .stats-table th.sort-asc::after{content:' â–²';font-size:.65rem}
        .stats-table th.sort-desc::after{content:' â–¼';font-size:.65rem}
        .stats-table td{padding:.5rem;text-align:center;border-bottom:1px solid var(--cream)}
        .stats-table tr:hover{background:rgba(204,0,0,.03)}
        .stats-table .player-name{text-align:left;font-weight:600;white-space:nowrap}
        .stats-table .highlight{background:rgba(212,175,55,.15)}
        .summary-bar{display:flex;justify-content:center;gap:2rem;margin:1.5rem 0;flex-wrap:wrap}
        .summary-item{text-align:center;background:var(--white);border:2px solid var(--dark);padding:1rem 1.5rem}
        .summary-item .num{font-family:'Bebas Neue',sans-serif;font-size:2rem;color:var(--accent)}
        .summary-item .lbl{font-family:'Oswald',sans-serif;font-size:.8rem;color:#666}
        .loading{text-align:center;padding:3rem;color:#666}
        .loading .spinner{display:inline-block;width:40px;height:40px;border:4px solid var(--cream);border-top-color:var(--accent);border-radius:50%;animation:spin .8s linear infinite;margin-bottom:1rem}
        @keyframes spin{to{transform:rotate(360deg)}}
        .legend{background:var(--cream);border:2px solid var(--dark);padding:1rem;margin-top:1.5rem;font-size:.85rem}
        .legend h4{font-family:'Oswald',sans-serif;color:var(--accent);margin-bottom:.5rem}
        .legend-grid{display:flex;flex-wrap:wrap;gap:1rem}
        @media print{.page-header{margin-top:0}nav,.controls,.cat-tabs,.legend{display:none!important}.stats-table{font-size:.7rem}.stats-table th{background:#333!important;-webkit-print-color-adjust:exact;print-color-adjust:exact}}
        @media(max-width:768px){.controls{flex-direction:column}.control-group select,.control-group input{width:100%;min-width:auto}.podium-container{flex-direction:column;align-items:center}.podium-card{order:unset!important;min-height:auto!important;width:90%}.stats-table{font-size:.75rem}.stats-table th,.stats-table td{padding:.3rem}}
        nav{position:fixed;top:0;left:0;right:0;z-index:1000;background:var(--white);box-shadow:0 2px 20px rgba(0,0,0,.1)}nav .nav-container{max-width:1400px;margin:0 auto;padding:.75rem 2rem;display:flex;justify-content:space-between;align-items:center}.logo{display:flex;align-items:center;gap:.75rem;text-decoration:none}.logo img{height:55px}nav ul{display:flex;list-style:none;gap:.5rem}nav li{position:relative}nav a{text-decoration:none;color:var(--dark);font-weight:600;text-transform:uppercase;font-size:.85rem;padding:.5rem 1rem;display:block;transition:.3s}nav a:hover{color:var(--primary);background:var(--cream)}.dropdown-content{display:none;position:absolute;top:100%;left:0;background:var(--white);min-width:220px;box-shadow:0 8px 16px rgba(0,0,0,.1);border:2px solid var(--dark);z-index:1001}.dropdown-content a{padding:.75rem 1rem;border-bottom:1px solid var(--cream);font-size:.8rem}.dropdown:hover .dropdown-content{display:block}.dropdown>a::after{content:' \25BC';font-size:.6rem}.hamburger{display:none;font-size:2rem;cursor:pointer;padding:.5rem;color:var(--dark)}.dropdown.open .dropdown-content{display:block!important}
        @media(max-width:768px){.hamburger{display:block}nav ul{display:none;position:absolute;top:100%;left:0;right:0;background:var(--white);flex-direction:column;padding:1rem;box-shadow:0 8px 16px rgba(0,0,0,.1)}nav ul.open{display:flex}.dropdown-content{position:static;box-shadow:none;border:none;border-left:3px solid var(--primary);margin-left:1rem}.dropdown:hover .dropdown-content{display:none}.dropdown.open .dropdown-content{display:block}}
        footer{background:var(--dark);color:var(--white);padding:3rem 2rem}.footer-social{display:flex;gap:.5rem;flex-wrap:wrap}.social-link{display:inline-flex;align-items:center;gap:.5rem;background:rgba(255,255,255,.1);padding:.6rem 1.2rem;border-radius:5px;color:white;text-decoration:none;transition:.3s}.social-link:hover{background:var(--gold);color:var(--dark)}.footer-bottom{max-width:1400px;margin:1.5rem auto 0;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.2);text-align:center;opacity:.7;font-size:.85rem}
    </style>
</head>
<body>

<nav><div class="nav-container"><a href="index.html" class="logo"><img src="logo-lbma.jpg" alt="LBMA"></a><div class="hamburger" onclick="document.querySelector('nav ul').classList.toggle('open')">&#9776;</div><ul><li><a href="index.html">Accueil</a></li><li><a href="equipes.html">Ã‰quipes</a></li><li><a href="joueurs.html">Joueurs</a></li><li><a href="calendrier.html">Calendrier</a></li><li class="dropdown"><a href="#">Statistiques</a><div class="dropdown-content"><a href="classement-equipes.html">ğŸ† Classement</a><a href="stats-frappeurs.html">âš¾ Frappeurs</a><a href="stats-lanceurs.html">ğŸ¯ Lanceurs</a><a href="stats-series.html">ğŸ† SÃ©ries Ã‰liminatoires</a></div></li><li class="dropdown"><a href="#" style="color:var(--accent);font-weight:700">Archives</a><div class="dropdown-content"><a href="archives-frappeurs.html">ğŸ“Š Stats Frappeurs par AnnÃ©e</a><a href="frappeurs-carriere.html">â­ Frappeurs - CarriÃ¨re</a><a href="frappeurs-records.html">ğŸ† Frappeurs - Records</a><a href="archives-lanceurs.html">ğŸ“Š Stats Lanceurs par AnnÃ©e</a><a href="lanceurs-carriere.html">â­ Lanceurs - CarriÃ¨re</a><a href="lanceurs-records.html">ğŸ† Lanceurs - Records</a><a href="classement-equipes.html">ğŸ“ˆ Classements Historiques</a><a href="temple-renommee.html">ğŸ›ï¸ Temple de la RenommÃ©e</a><a href="archives.html">ğŸ“š Archives ComplÃ¨tes</a></div></li><li><a href="contact.html">Direction</a></li><li><a href="admin.html" style="color:var(--accent)">Admin</a></li></ul></div></nav>

<div class="page-header">
    <h1>â­ CarriÃ¨re des Lanceurs</h1>
    <p>Statistiques cumulatives de tous les lanceurs â€¢ Mise Ã  jour automatique</p>
</div>

<div class="container">
    <div class="summary-bar">
        <div class="summary-item"><div class="num" id="totalPlayers">â€”</div><div class="lbl">Lanceurs</div></div>
        <div class="summary-item"><div class="num" id="totalSeasons">â€”</div><div class="lbl">Saisons</div></div>
        <div class="summary-item"><div class="num" id="dataSource">â€”</div><div class="lbl">Source</div></div>
    </div>
    <div class="controls">
        <div class="control-group"><label>ğŸ” Recherche</label><input type="text" id="searchInput" placeholder="Nom du lanceur..."></div>
        <div class="control-group"><label>Minimum ML</label><select id="minML"><option value="0">Tous</option><option value="30" selected>30+ ML</option><option value="100">100+ ML</option><option value="500">500+ ML</option></select></div>
        <button class="btn btn-secondary" onclick="resetFilters()">ğŸ”„ RÃ©initialiser</button>
    </div>
    <div class="cat-tabs">
        <button class="cat-tab active" data-col="moy" data-dir="asc">MOY</button>
        <button class="cat-tab" data-col="v" data-dir="desc">V</button>
        <button class="cat-tab" data-col="pl" data-dir="desc">PL</button>
        <button class="cat-tab" data-col="ml" data-dir="desc">ML</button>
        <button class="cat-tab" data-col="rb" data-dir="desc">RB</button>
        <button class="cat-tab" data-col="bb" data-dir="desc">BB</button>
        <button class="cat-tab" data-col="d" data-dir="desc">D</button>
        <button class="cat-tab" data-col="n" data-dir="desc">N</button>
    </div>
    <div class="podium-container" id="podium"></div>
    <div class="loading" id="loading"><div class="spinner"></div><div>Calcul des carriÃ¨res...</div></div>
    <div class="table-wrap" id="tableWrap" style="display:none"><table class="stats-table"><thead><tr id="tableHead"></tr></thead><tbody id="tableBody"></tbody></table></div>
    <div class="legend"><h4>ğŸ“– LÃ©gende</h4><div class="legend-grid"><span><strong>PL</strong>=Parties lancÃ©es</span><span><strong>ML</strong>=Manches lancÃ©es</span><span><strong>V</strong>=Victoires</span><span><strong>D</strong>=DÃ©faites</span><span><strong>N</strong>=Nulles</span><span><strong>PC</strong>=Points comptÃ©s</span><span><strong>CS</strong>=Coups sÃ»rs accordÃ©s</span><span><strong>BB</strong>=Buts/balles</span><span><strong>RB</strong>=Retraits/bÃ¢ton</span><span><strong>MOY</strong>=Moyenne (PCÃ—7/ML)</span></div></div>
</div>

<footer><div class="footer-grid" style="max-width:1400px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:2rem"><div><div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem"><img src="logo-lbma.jpg" alt="LBMA" style="height:50px;background:white;padding:5px;border-radius:5px"><div><div style="font-family:'Bebas Neue',sans-serif;font-size:1.5rem">LBMA</div><div style="opacity:.7;font-size:.9rem">Depuis 1976</div></div></div><div class="footer-social"><a href="https://www.facebook.com/groups/2400013274" target="_blank" class="social-link">ğŸ“˜ Facebook</a><a href="https://www.marqueur.com/baseball/mbr/tools/blg/index.php?nyx=1154" target="_blank" class="social-link">ğŸ“Š Marqueur.com</a></div></div><div><h4 style="font-family:'Oswald',sans-serif;color:var(--gold);margin-bottom:1rem">ğŸ“š Archives</h4><ul style="list-style:none"><li><a href="archives-lanceurs.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Stats Lanceurs par AnnÃ©e</a></li><li><a href="frappeurs-carriere.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Frappeurs - CarriÃ¨re</a></li></ul></div><div><h4 style="font-family:'Oswald',sans-serif;color:var(--gold);margin-bottom:1rem">âš¾ La Ligue</h4><ul style="list-style:none"><li><a href="equipes.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Ã‰quipes 2026</a></li><li><a href="calendrier.html" style="color:white;text-decoration:none;display:block;padding:.25rem 0;opacity:.8">Calendrier</a></li></ul></div></div><div class="footer-bottom">Â© 2026 Ligue de Balle Molle Amicale (LBMA) - Tous droits rÃ©servÃ©s</div></footer>

<script>
/*
 * CARRIÃˆRE LANCEURS â€” CALCULÃ‰ Ã€ PARTIR DES DONNÃ‰ES PAR SAISON
 * ============================================================
 * SOURCE : Supabase lanceurs_saison (prioritaire) + lanceurs-data.json (fallback)
 * MÃŠME pattern que archives-lanceurs.html = donnÃ©es CORRECTES
 *
 * NE LIT PAS lanceurs-carriere.json
 */

var SUPABASE_URL = 'https://xgyskiatppgaeaamjhxr.supabase.co';
var SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhneXNraWF0cHBnYWVhYW1qaHhyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA0OTgxNTQsImV4cCI6MjA4NjA3NDE1NH0.67KCcUWlJij-scDoCUvZpkiCle5-mHVmy-inRk96Tac';

var allCareer = [];
var currentSort = { col: 'moy', dir: 'asc' };

function normalizePlayer(p) {
    return {
        nom: p.nom || '',
        equipe: p.equipe || '',
        pl: p.pl || 0,
        ml: p.ml || 0,
        pc: p.pc || 0,
        cs: p.cs || 0,
        bb: p.bb || 0,
        rb: p.rb || 0,
        v:  p.v || 0,
        d:  p.d || 0,
        n:  p.n || 0,
        moy: p.moy || (p.ml > 0 ? p.pc / p.ml : 0)
    };
}

function nameKey(nom) {
    if (!nom) return '';
    return nom.trim().toUpperCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/,\s*[A-Z]{2}$/, '');
}

async function init() {
    var allSeasonData = {};
    var source = 'Aucune donnÃ©e';

    // 1. Try Supabase first (same as archives-lanceurs.html)
    try {
        var url = SUPABASE_URL + '/rest/v1/lanceurs_saison?select=*&order=saison.desc,moy.asc&limit=1000';
        var resp = await fetch(url, {
            headers: { 'apikey': SUPABASE_ANON_KEY, 'Authorization': 'Bearer ' + SUPABASE_ANON_KEY, 'Range': '0-999' }
        });
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        var rows = await resp.json();
        if (!rows || rows.length === 0) throw new Error('Aucune donnÃ©e');
        rows.forEach(function(row) {
            var s = String(row.saison);
            if (!allSeasonData[s]) allSeasonData[s] = [];
            allSeasonData[s].push(normalizePlayer(row));
        });
        source = 'Supabase';
        console.log('âœ… Supabase lanceurs: ' + rows.length + ' lignes');
    } catch (e) {
        console.warn('Supabase indisponible:', e.message);
        // 2. Fallback to JSON
        try {
            var resp2 = await fetch('lanceurs-data.json');
            var jsonData = await resp2.json();
            Object.keys(jsonData).forEach(function(year) {
                allSeasonData[year] = jsonData[year].map(normalizePlayer);
            });
            source = 'JSON';
            console.log('âœ… JSON lanceurs chargÃ©');
        } catch (e2) {
            console.error('Erreur JSON lanceurs:', e2);
        }
    }

    // 3. Cumulate per pitcher
    var careerMap = {};
    var years = Object.keys(allSeasonData).filter(function(y) { return !isNaN(parseInt(y)); });

    years.forEach(function(year) {
        var players = allSeasonData[year];
        if (!players) return;
        players.forEach(function(p) {
            if (!p.nom) return;
            var key = nameKey(p.nom);
            if (!key) return;
            if (!careerMap[key]) {
                careerMap[key] = {
                    nom: p.nom, equipe: p.equipe,
                    pl: 0, ml: 0, pc: 0, cs: 0, bb: 0, rb: 0,
                    v: 0, d: 0, n: 0,
                    seasons: [], _lastYear: 0
                };
            }
            var c = careerMap[key];
            c.pl += p.pl; c.ml += p.ml; c.pc += p.pc;
            c.cs += p.cs; c.bb += p.bb; c.rb += p.rb;
            c.v += p.v; c.d += p.d; c.n += p.n;
            var yr = parseInt(year);
            if (!isNaN(yr)) {
                if (c.seasons.indexOf(yr) === -1) c.seasons.push(yr);
                if (yr > c._lastYear) { c._lastYear = yr; c.equipe = p.equipe || c.equipe; if (p.nom !== p.nom.toUpperCase()) c.nom = p.nom; }
            }
        });
    });

    allCareer = Object.values(careerMap).map(function(c) {
        c.moy = c.ml > 0 ? Math.round((c.pc * 7 / c.ml) * 100) / 100 : 0;
        c.nbSeasons = c.seasons.length;
        c.ml = Math.round(c.ml * 10) / 10; // clean up floating point
        return c;
    });

    document.getElementById('totalPlayers').textContent = allCareer.length;
    document.getElementById('totalSeasons').textContent = years.length;
    document.getElementById('dataSource').textContent = source;
    document.getElementById('loading').style.display = 'none';
    document.getElementById('tableWrap').style.display = 'block';
    console.log('âœ… CarriÃ¨res lanceurs: ' + allCareer.length + ' lanceurs, ' + years.length + ' saisons');
    renderAll();
}

function getFiltered() {
    var data = allCareer.slice();
    var q = document.getElementById('searchInput').value.toLowerCase().trim();
    if (q) data = data.filter(function(p) { return p.nom.toLowerCase().indexOf(q) >= 0; });
    var minML = parseInt(document.getElementById('minML').value) || 0;
    if (minML > 0) data = data.filter(function(p) { return (p.ml || 0) >= minML; });
    return data;
}

function renderAll() {
    var tab = document.querySelector('.cat-tab.active');
    currentSort = { col: tab.dataset.col, dir: tab.dataset.dir };
    renderPodium(currentSort.col, currentSort.dir);
    renderTable(currentSort.col);
}

function renderPodium(col, dir) {
    var data = getFiltered();
    if (col === 'moy') data = data.filter(function(p) { return (p.ml || 0) >= 30 && p.moy > 0; });
    data.sort(function(a, b) { return dir === 'desc' ? (b[col]||0) - (a[col]||0) : (a[col]||0) - (b[col]||0); });
    var top3 = data.slice(0, 3);
    var medals = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
    var labels = {moy:'MOY',v:'V',pl:'PL',ml:'ML',rb:'RB',bb:'BB',d:'D',n:'N'};
    document.getElementById('podium').innerHTML = top3.map(function(p, i) {
        var val = col === 'moy' ? (p.moy||0).toFixed(2) : (col === 'ml' ? (p.ml||0).toFixed(1) : (p[col]||0));
        return '<div class="podium-card podium-'+(i+1)+'"><div class="podium-rank">'+medals[i]+'</div><div class="podium-name">'+p.nom+'</div><div class="podium-stat">'+val+'</div><div class="podium-label">'+(labels[col]||col)+(p.equipe?' Â· '+p.equipe:'')+' Â· '+p.nbSeasons+' sais.</div></div>';
    }).join('');
}

var COLS = [
    {key:'pl',label:'PL'},{key:'ml',label:'ML',fmt:function(v){return Number(v||0).toFixed(1);}},
    {key:'v',label:'V'},{key:'d',label:'D'},{key:'n',label:'N'},
    {key:'pc',label:'PC'},{key:'cs',label:'CS'},{key:'bb',label:'BB'},{key:'rb',label:'RB'},
    {key:'moy',label:'MOY',fmt:function(v){return v>0?Number(v).toFixed(2):'â€”';}}
];

function renderTable(highlightCol) {
    var data = getFiltered();
    data.sort(function(a,b){var va=a[currentSort.col]||0,vb=b[currentSort.col]||0;return currentSort.dir==='desc'?vb-va:va-vb;});
    var h='<th>#</th><th onclick="sortBy(\'nom\')" class="'+(currentSort.col==='nom'?'sort-'+currentSort.dir:'')+'" style="text-align:left">Joueur</th>';
    COLS.forEach(function(c){h+='<th onclick="sortBy(\''+c.key+'\')" class="'+(currentSort.col===c.key?'sort-'+currentSort.dir:'')+'">'+c.label+'</th>';});
    document.getElementById('tableHead').innerHTML=h;
    var b='';
    data.forEach(function(p,i){
        b+='<tr class="'+(i<10?'highlight':'')+'"><td>'+(i+1)+'</td><td class="player-name">'+p.nom+'</td>';
        COLS.forEach(function(c){var val=c.fmt?c.fmt(p[c.key]):(p[c.key]||0);var hl=c.key===highlightCol?' style="font-weight:700;color:var(--accent)"':'';b+='<td'+hl+'>'+val+'</td>';});
        b+='</tr>';
    });
    document.getElementById('tableBody').innerHTML=b;
}

function sortBy(col){if(currentSort.col===col)currentSort.dir=currentSort.dir==='desc'?'asc':'desc';else{currentSort.col=col;currentSort.dir=(col==='nom'||col==='moy')?'asc':'desc';}renderTable(document.querySelector('.cat-tab.active').dataset.col);}
function resetFilters(){document.getElementById('searchInput').value='';document.getElementById('minML').value='30';renderAll();}
document.querySelectorAll('.cat-tab').forEach(function(t){t.addEventListener('click',function(){document.querySelectorAll('.cat-tab').forEach(function(x){x.classList.remove('active');});t.classList.add('active');renderAll();});});
document.getElementById('searchInput').addEventListener('input',renderAll);
document.getElementById('minML').addEventListener('change',renderAll);
(function(){var isTouch='ontouchstart' in window||navigator.maxTouchPoints>0;document.querySelectorAll('nav .dropdown > a').forEach(function(a){a.addEventListener('click',function(e){if(isTouch||window.innerWidth<=768){e.preventDefault();var parent=this.parentElement;document.querySelectorAll('nav .dropdown').forEach(function(d){if(d!==parent)d.classList.remove('open');});parent.classList.toggle('open');}});});document.addEventListener('click',function(e){if(!e.target.closest('nav')){var ul=document.querySelector('nav ul');if(ul)ul.classList.remove('open');document.querySelectorAll('nav .dropdown').forEach(function(d){d.classList.remove('open');});}});})();
init();
</script>
<script src="lbma-analytics.js"></script>
</body>
</html>
